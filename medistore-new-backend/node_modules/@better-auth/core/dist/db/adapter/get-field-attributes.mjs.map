{"version":3,"file":"get-field-attributes.mjs","names":[],"sources":["../../../src/db/adapter/get-field-attributes.ts"],"sourcesContent":["import { BetterAuthError } from \"../../error\";\nimport type { BetterAuthOptions } from \"../../types\";\nimport type { BetterAuthDBSchema } from \"../type\";\nimport { initGetDefaultFieldName } from \"./get-default-field-name\";\nimport { initGetDefaultModelName } from \"./get-default-model-name\";\nimport { initGetIdField } from \"./get-id-field\";\n\nexport const initGetFieldAttributes = ({\n\tusePlural,\n\tschema,\n\toptions,\n\tcustomIdGenerator,\n\tdisableIdGeneration,\n}: {\n\tusePlural?: boolean;\n\tschema: BetterAuthDBSchema;\n\toptions: BetterAuthOptions;\n\tdisableIdGeneration?: boolean;\n\tcustomIdGenerator?: ((props: { model: string }) => string) | undefined;\n}) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tusePlural,\n\t\tschema,\n\t});\n\n\tconst getDefaultFieldName = initGetDefaultFieldName({\n\t\tusePlural,\n\t\tschema,\n\t});\n\n\tconst idField = initGetIdField({\n\t\tusePlural,\n\t\tschema,\n\t\toptions,\n\t\tcustomIdGenerator,\n\t\tdisableIdGeneration,\n\t});\n\n\tconst getFieldAttributes = ({\n\t\tmodel,\n\t\tfield,\n\t}: {\n\t\tmodel: string;\n\t\tfield: string;\n\t}) => {\n\t\tconst defaultModelName = getDefaultModelName(model);\n\t\tconst defaultFieldName = getDefaultFieldName({\n\t\t\tfield: field,\n\t\t\tmodel: defaultModelName,\n\t\t});\n\n\t\tconst fields = schema[defaultModelName]!.fields;\n\t\tfields.id = idField({ customModelName: defaultModelName });\n\t\tconst fieldAttributes = fields[defaultFieldName];\n\t\tif (!fieldAttributes) {\n\t\t\tthrow new BetterAuthError(`Field ${field} not found in model ${model}`);\n\t\t}\n\t\treturn fieldAttributes;\n\t};\n\n\treturn getFieldAttributes;\n};\n"],"mappings":";;;;;;AAOA,MAAa,0BAA0B,EACtC,WACA,QACA,SACA,mBACA,0BAOK;CACL,MAAM,sBAAsB,wBAAwB;EACnD;EACA;EACA,CAAC;CAEF,MAAM,sBAAsB,wBAAwB;EACnD;EACA;EACA,CAAC;CAEF,MAAM,UAAU,eAAe;EAC9B;EACA;EACA;EACA;EACA;EACA,CAAC;CAEF,MAAM,sBAAsB,EAC3B,OACA,YAIK;EACL,MAAM,mBAAmB,oBAAoB,MAAM;EACnD,MAAM,mBAAmB,oBAAoB;GACrC;GACP,OAAO;GACP,CAAC;EAEF,MAAM,SAAS,OAAO,kBAAmB;AACzC,SAAO,KAAK,QAAQ,EAAE,iBAAiB,kBAAkB,CAAC;EAC1D,MAAM,kBAAkB,OAAO;AAC/B,MAAI,CAAC,gBACJ,OAAM,IAAI,gBAAgB,SAAS,MAAM,sBAAsB,QAAQ;AAExE,SAAO;;AAGR,QAAO"}